!function(){var e={942:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=i(e,a(r)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=i(t,r));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r,n){return(r=function(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function n(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function s(e){n(i,o,a,s,l,"next",e)}function l(e){n(i,o,a,s,l,"throw",e)}s(void 0)}))}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=window.regeneratorRuntime,u=r.n(c),p=window.wp.i18n,d=window.wp.element,_=window.wp.notices,f=window.wp.components,h=window.wp.data,b=window.wp.compose,v=window.wp.coreData,g=window.wp.a11y,m=window.wp.htmlEntities;function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?w(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=window.wp.editor,k=window.ReactJSXRuntime;function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var O={per_page:-1,orderby:"name",order:"asc",_fields:"id,name,parent",context:"view"},P=[];function C(e,t,r){return e.find((function(e){return(!e.parent&&!t||parseInt(e.parent)===parseInt(t))&&e.name.toLowerCase()===r.toLowerCase()}))}function S(e){var r,n,a,i=e.slug,c=s((0,d.useState)(!1),2),w=c[0],S=c[1],A=s((0,d.useState)(""),2),T=A[0],D=A[1],E=s((0,d.useState)(""),2),N=E[0],B=E[1],z=s((0,d.useState)(!1),2),M=z[0],I=z[1],F=s((0,d.useState)(""),2),H=F[0],Z=F[1],R=s((0,d.useState)([]),2),V=R[0],G=R[1],L=(0,b.useDebounce)(g.speak,500),U=(0,h.useSelect)((function(e){var t,r,n,o,a=e(x.store),s=a.getCurrentPost,l=a.getEditedPostAttribute,c=e(v.store),u=c.getTaxonomy,p=c.getEntityRecords,d=c.isResolving,_=u(i),f=s();return{hasCreateAction:!!_&&null!==(t=null===(r=f._links)||void 0===r?void 0:r["wp:action-create-"+_.rest_base])&&void 0!==t&&t,hasAssignAction:!!_&&null!==(n=null===(o=f._links)||void 0===o?void 0:o["wp:action-assign-"+_.rest_base])&&void 0!==n&&n,terms:_?l(_.rest_base):P,loading:d("getEntityRecords",["taxonomy",i,O]),availableTerms:p("taxonomy",i,O)||P,taxonomy:_}}),[i]),W=U.hasCreateAction,q=U.hasAssignAction,J=U.terms,K=U.loading,X=U.availableTerms,$=U.taxonomy,Q=(0,h.useDispatch)(x.store).editPost,Y=(0,h.useDispatch)(v.store).saveEntityRecord,ee=(0,d.useMemo)((function(){return function(e,t){var r=function(e){return-1!==t.indexOf(e.id)||void 0!==e.children&&e.children.map(r).filter((function(e){return e})).length>0},n=l(e);return n.sort((function(e,t){var n=r(e),o=r(t);return n===o?0:n&&!o?-1:!n&&o?1:0})),n}(function(e){var t=e.map((function(e){return y({children:[],parent:void 0},e)}));if(t.some((function(e){return void 0===e.parent})))return t;var r=t.reduce((function(e,t){var r=t.parent;return e[r]||(e[r]=[]),e[r].push(t),e}),{}),n=function(e){return e.map((function(e){var t=r[e.id];return y(y({},e),{},{children:t&&t.length?n(t):[]})}))};return n(r[0]||[])}(X),J)}),[X]),te=(0,h.useDispatch)(_.store).createErrorNotice;if(!q)return null;var re=function(e){Q(t({},$.rest_base,e))},ne=function(){var e=o(u().mark((function e(t){var r,n,o,a,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==T&&!w){e.next=3;break}return e.abrupt("return");case 3:if(!(o=C(X,N,T))){e.next=9;break}return J.some((function(e){return e===o.id}))||re([].concat(l(J),[o.id])),D(""),B(""),e.abrupt("return");case 9:return S(!0),e.prev=10,e.next=13,Y("taxonomy",i,{name:T,parent:N||void 0},{throwOnError:!0});case 13:a=e.sent,e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(10),te(e.t0.message,{type:"snackbar"}),e.abrupt("return");case 20:s="category"===i?(0,p.__)("Category"):(0,p.__)("Term"),c=(0,p.sprintf)(/* translators: %s: taxonomy name */ /* translators: %s: taxonomy name */
(0,p._x)("%s added","term"),null!==(r=null==$||null===(n=$.labels)||void 0===n?void 0:n.singular_name)&&void 0!==r?r:s),(0,g.speak)(c,"assertive"),S(!1),D(""),B(""),re([].concat(l(J),[a.id]));case 27:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){return e.map((function(e){return(0,k.jsxs)("div",{className:"editor-post-taxonomies__hierarchical-terms-choice",children:[(0,k.jsx)(f.CheckboxControl,{__nextHasNoMarginBottom:!0,checked:-1!==J.indexOf(e.id),onChange:function(){var t,r;t=parseInt(e.id,10),r=J.includes(t)?J.filter((function(e){return e!==t})):[].concat(l(J),[t]),re(r)},label:(0,m.decodeEntities)(e.name)}),!!e.children.length&&(0,k.jsx)("div",{className:"editor-post-taxonomies__hierarchical-terms-subchoices",children:oe(e.children)})]},e.id)}))},ae=function(e,t,r){var n,o;return null!==(n=null==$||null===(o=$.labels)||void 0===o?void 0:o[e])&&void 0!==n?n:"category"===i?t:r},ie=ae("add_new_item",(0,p.__)("Add new category"),(0,p.__)("Add new term")),se=ae("new_item_name",(0,p.__)("Add new category"),(0,p.__)("Add new term")),le=ae("parent_item",(0,p.__)("Parent Category"),(0,p.__)("Parent Term")),ce=("— ".concat(le," —"),ie),ue=null!==(r=null==$||null===(n=$.labels)||void 0===n?void 0:n.search_items)&&void 0!==r?r:(0,p.__)("Search Terms"),pe=null!==(a=null==$?void 0:$.name)&&void 0!==a?a:(0,p.__)("Terms"),de=X.length>=8;return(0,k.jsxs)(f.Flex,{direction:"column",gap:"4",children:[de&&(0,k.jsx)(f.SearchControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:ue,value:H,onChange:function(e){var r=ee.map(function(e){var r=function(n){if(""===e)return n;var o=function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?j(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return o.children.length>0&&(o.children=o.children.map(r).filter((function(e){return e}))),(-1!==o.name.toLowerCase().indexOf(e.toLowerCase())||o.children.length>0)&&o};return r}(e)).filter((function(e){return e})),n=function(e){for(var t=0,r=0;r<e.length;r++)t++,void 0!==e[r].children&&(t+=n(e[r].children));return t};Z(e),G(r);var o=n(r),a=(0,p.sprintf)(/* translators: %d: number of results */ /* translators: %d: number of results */
(0,p._n)("%d result found.","%d results found.",o),o);L(a,"assertive")}}),(0,k.jsx)("div",{className:"editor-post-taxonomies__hierarchical-terms-list",tabIndex:"0",role:"group","aria-label":pe,children:oe(""!==H?V:ee)}),!K&&W&&(0,k.jsx)(f.FlexItem,{children:(0,k.jsx)(f.Button,{__next40pxDefaultSize:!0,onClick:function(){I(!M)},className:"editor-post-taxonomies__hierarchical-terms-add","aria-expanded":M,variant:"link",children:ie})}),M&&(0,k.jsx)("form",{onSubmit:ne,children:(0,k.jsxs)(f.Flex,{direction:"column",gap:"4",children:[(0,k.jsx)(f.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,className:"editor-post-taxonomies__hierarchical-terms-input",label:se,value:T,onChange:function(e){D(e)},required:!0}),(0,k.jsx)(f.FlexItem,{children:(0,k.jsx)(f.Button,{__next40pxDefaultSize:!0,variant:"secondary",type:"submit",className:"editor-post-taxonomies__hierarchical-terms-submit",children:ce})})]})})]})}var A=[],T={per_page:-1,_fields:"id,name",orderby:"name",order:"asc",context:"view"};function D(e){var r=e.slug,n=(e.__nextHasNoMarginBottom,(0,h.useDispatch)(x.store).editPost),o=(0,h.useSelect)((function(e){var t,n,o,a,i=e(x.store),s=i.getCurrentPost,l=i.getEditedPostAttribute,c=e(v.store),u=c.getTaxonomy,p=c.getEntityRecords,d=c.isResolving,_=u(r),f=s();return{hasCreateAction:!!_&&null!==(t=null===(n=f._links)||void 0===n?void 0:n["wp:action-create-"+_.rest_base])&&void 0!==t&&t,hasAssignAction:!!_&&null!==(o=null===(a=f._links)||void 0===a?void 0:a["wp:action-assign-"+_.rest_base])&&void 0!==o&&o,termIds:_?l(_.rest_base):A,loading:d("getEntityRecords",["taxonomy",r,T]),availableTerms:p("taxonomy",r,T)||A,taxonomy:_}}),[r]),a=o.termIds,i=o.availableTerms,s=o.taxonomy,c=i.filter((function(e){return a.includes(e.id)})),u=function(e){n(t({},s.rest_base,e))},p="Vyberte autorstvo.",d=[];return i&&(d=i.map((function(e){return{label:e.name||"",value:e.id}}))),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(f.ComboboxControl,{options:d||[],onChange:function(e){return function(e){if(!a.includes(e)){var t=[].concat(l(a),[e]);u(t),p=t.length>0?"Vyberte ďalšie autorstvo":"Vyberte autorstvo"}}(e)},placeholder:p,value:""}),(0,k.jsx)(f.Flex,{direction:"column",align:"start",gap:"2",style:{marginTop:"16px"},children:c.length>0&&c.map((function(e){return(0,k.jsxs)(f.FlexItem,{style:{padding:"2px 2px 2px 8px",background:"rgb(233, 233, 233)",borderRadius:"3px"},children:[(0,k.jsx)("span",{style:{lineHeight:"24px",verticalAlign:"bottom"},children:e.name}),(0,k.jsx)(f.Button,{value:e.id,size:"small",icon:"no-alt",iconSize:16,onClick:function(e){return function(e){if(e=Number(e),a.includes(e)){var t=a.filter((function(t){return t!==e}));u(t),p=t.length>0?"Vyberte ďalšie autorstvo":"Vyberte autorstvo"}}(e.target.closest("button").value)}})]})}))})]})}var E=window.wp.plugins;function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?N(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e){var t=e.meta,r=e.setMeta;if("event"===e.postType){var n=[],o={audio:(0,p.__)("Audio","kapital"),video:(0,p.__)("Video","kapital"),foto:(0,p.__)("Foto","kapital")};return null!==t._kapital_event_recording&&(n=t._kapital_event_recording.split("-").filter((function(e){return""!==e}))),(0,k.jsx)(x.PluginDocumentSettingPanel,{name:"kapital-event-recording-panel",title:(0,p.__)("Záznam podujatia"),children:(0,k.jsx)(f.Flex,{direction:"column",gap:4,children:Object.keys(o).map((function(e){return(0,k.jsx)(f.CheckboxControl,{__nextHasNoMarginBottom:!0,label:o[e],checked:n.includes(e),onChange:function(o){var a=o?[].concat(l(n),[e]):n.filter((function(t){return t!==e}));r(B(B({},t),{},{_kapital_event_recording:M(a)}))}},e)}))})})}}var M=function(e){var t=(e=e.sort()).join("-");return console.log(t),t};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?I(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=window.wp.apiFetch,Z=r.n(H),R=window.wp.blockEditor;function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?V(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=r(942),U=r.n(L),W=window.wp.hooks;function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?q(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K,X,$,Q=window.wp.blocks;function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Y(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){(0,W.addFilter)("blocks.registerBlockType","core/button",(function(t,r){return"core/button"!==t.name||(e(t.attributes),t.attributes&&(t.attributes.icon={type:"string",default:"none"},t.attributes.iconAlign={type:"string",default:"icon-right"})),t}));var t=(0,b.createHigherOrderComponent)((function(e){return function(t){var r=t.attributes,n=t.setAttributes;return"core/button"!==t.name?(0,k.jsx)(e,J({},t)):(0,k.jsxs)(d.Fragment,{children:[(0,k.jsx)(e,J({},t)),(0,k.jsx)(R.InspectorControls,{children:(0,k.jsxs)(f.PanelBody,{title:"Ikona",children:[(0,k.jsx)(f.SelectControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Ikona","kapital"),value:r.icon,onChange:function(e){n({icon:e})},options:[{label:(0,p.__)("Žiadna","kapital"),value:"none"},{label:(0,p.__)("→","kapital"),value:"icon-arrow-right"},{label:(0,p.__)("↓","kapital"),value:"icon-arrow-down"},{label:(0,p.__)("↗","kapital"),value:"icon-arrow-up-right"}]}),"none"!==r.icon&&(0,k.jsx)(f.SelectControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Ikona","kapital"),value:r.iconAlign,onChange:function(e){n({iconAlign:e})},options:[{label:(0,p.__)("Vpravo","kapital"),value:"icon-right"},{label:(0,p.__)("Vľavo","kapital"),value:"icon-left"}]})]})})]})}}),"withInspectorControl");(0,W.addFilter)("editor.BlockEdit","core/button",t);var r=(0,b.createHigherOrderComponent)((function(e){return function(t){var r=t.attributes,n=r.icon,o=r.iconAlign,a=t.className;return"core/button"!==t.name?(0,k.jsx)(e,J({},t)):(0,k.jsx)(e,J(J({},t),{},{className:U()(a,"none"!==n?"".concat(n," ").concat(o):"")}))}}),"withClientIdClassName");(0,W.addFilter)("editor.BlockListBlock","kapital/button-block/add-editor-class",r)}(),(0,E.registerPlugin)("kptl-tts-render-panel",{render:function(){var e,t,r=[(0,p.__)("Nespustené","kapital"),(0,p.__)("Chyba: Timeout","kapital"),(0,p.__)("Chyba: ElevenLabs API","kapital"),(0,p.__)("Prebieha konverzia","kapital"),(0,p.__)("Úspešné","kapital"),(0,p.__)("Manuálne nahrané audio","kapital")],n=(0,h.useSelect)((function(e){return e("core/editor").getCurrentPostType()}),[]),a=(0,h.useSelect)((function(e){return e("core/editor").getCurrentPostId()}),[]),i=(0,h.useSelect)((function(e){return{isSaving:e(x.store).isSavingPost(),isAutosaving:e(x.store).isAutosavingPost()}})),l=i.isSaving,c=i.isAutosaving,_=(0,h.useDispatch)("core/editor").savePost,b=s((0,v.useEntityProp)("postType",n,"meta"),2),g=b[0],m=b[1],w=(0,d.useRef)(!1),y=s((0,d.useState)(null!==(e=null==g?void 0:g._kptl_tts_status)&&void 0!==e?e:0),2),j=y[0],O=y[1],P=s((0,d.useState)(null!==(t=null==g?void 0:g._kptl_tts_audio_id)&&void 0!==t?t:0),2),C=P[0],S=P[1];(0,d.useEffect)((function(){var e,t;O(null!==(e=null==g?void 0:g._kptl_tts_status)&&void 0!==e?e:0),S(null!==(t=null==g?void 0:g._kptl_tts_audio_id)&&void 0!==t?t:0)}),[g]);var A=s((0,d.useState)(3===j),2),T=A[0],D=A[1];(0,d.useEffect)((function(){D(3===j)}),[j]);var E=s((0,d.useState)(null),2),N=E[0],B=E[1],z=s((0,d.useState)(!1),2),M=z[0],I=z[1],F=(0,h.useSelect)((function(e){if(!C)return null;var t=e("core").getMedia(C);return(null==t?void 0:t.source_url)||null}),[C]);(0,d.useEffect)((function(){"post"===n&&(!w.current||[1,2,4].includes(j))&&(w.current=!0,I(!0),Z()({path:"tts/v1/credits",method:"GET"}).then((function(e){null!=e&&e.success?B(e.data.toLocaleString("sk-SK")):B((0,p.__)("Chyba"))})).catch((function(){return B((0,p.__)("Chyba"))})).finally((function(){return I(!1)})))}),[T,j]),(0,d.useEffect)((function(){if(T&&!l&&!c){var e=setInterval((function(){Z()({path:"tts/v1/refresh-meta",method:"POST",data:{post_id:a}}).then((function(e){null!=e&&e.success&&(m(G(G({},g),e.data)),3!==e.data._kptl_tts_status&&D(!1))}))}),1e4);return function(){return clearInterval(e)}}}),[T,l,c]);var H=function(){var e=o(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&!T){e.next=2;break}return e.abrupt("return");case 2:return D(!0),e.prev=3,e.next=6,_();case 6:return e.next=8,Z()({path:"/tts/v1/start",method:"POST",data:{post_id:a}});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("TTS error:",e.t0),D(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return"post"!==n?null:(0,k.jsx)(x.PluginDocumentSettingPanel,{name:"kptl-tts-render-panel",title:(0,p.__)("Text to speech"),icon:"microphone",children:(0,k.jsxs)(f.Flex,{direction:"column",gap:3,style:{width:"100%"},children:[(0,k.jsxs)(f.FlexItem,{children:[(0,k.jsx)("strong",{children:(0,p.__)("Status:")})," ",T?r[3]:r[j]]}),(0,k.jsxs)(f.FlexItem,{children:[(0,k.jsx)("strong",{children:(0,p.__)("Zostávajúci kredit:")})," ",M?(0,p.__)("Načítavam...","kapital"):null!=N?N:"—"]}),(0,k.jsx)(f.Button,{style:{flexGrow:1,textAlign:"center",display:"inline-block"},variant:"secondary",onClick:H,isBusy:T,disabled:T,children:T?(0,p.__)("Prebieha...","kapital"):4===j?(0,p.__)("Generovať znova","kapital"):(0,p.__)("Generovať audio","kapital")}),!T&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(f.FlexItem,{children:(0,k.jsx)("strong",{children:(0,p.__)("Audio:","kapital")})}),(0,k.jsx)(f.FlexItem,{children:(0,k.jsxs)(f.Flex,{direction:"row",gap:"2",wrap:!0,children:[0!==C&&F&&(0,k.jsx)("audio",{style:{width:"100%"},controls:!0,src:F,children:(0,p.__)("Váš prehliadač nepodporuje audio.","kapital")}),(0,k.jsx)(R.MediaUploadCheck,{children:(0,k.jsx)(R.MediaUpload,{onSelect:function(e){var t;(t=null==e?void 0:e.id)&&t!==C&&m(G(G({},g),{},{_kptl_tts_audio_id:t,_kptl_tts_status:5}))},allowedTypes:["audio"],value:C,render:function(e){var t=e.open;return(0,k.jsx)(f.Button,{style:{flexGrow:1,textAlign:"center",display:"inline-block"},variant:"secondary",onClick:t,children:0===C?(0,p.__)("Manuálne nahrať","kapital"):(0,p.__)("Nahradiť")})}})}),0!==C&&(0,k.jsx)(f.Button,{style:{flexGrow:1,textAlign:"center",display:"inline-block"},variant:"secondary",isDestructive:!0,onClick:function(){m(G(G({},g),{},{_kptl_tts_audio_id:0,_kptl_tts_status:0}))},children:(0,p.__)("Odpojiť audio","kapital")})]})})]})]})})}}),(0,E.registerPlugin)("kapital-post-render-panel",{render:function(){var t=(0,h.useSelect)((function(e){return e("core/editor").getCurrentPostType()}),[]);if(("undefined"!=typeof postTypesWithControlledRendering?postTypesWithControlledRendering:[]).includes(t)){var r,n=s((0,v.useEntityProp)("postType",t,"meta"),2),o=n[0],a=n[1],i=o._kapital_post_render_settings,l={show_featured_image:!0,show_breadcrumbs:!0,show_title:!0,show_author:!0,show_categories:!0,show_views:!0,show_date:!0,show_ads:!0,show_support:!0,show_footer:!0,show_filters:!1,show_footer_newsletter:!0,show_share_button:!0,show_event_location:!1};r="podcast"===t?(0,p.__)("Automaticky vložiť odporúčania ďalších podcastov","kapital"):"event"===t?(0,p.__)("Automaticky vložiť odporúčania ďalších eventov","kapital"):(0,p.__)("Automaticky vložiť odporúčania ďalších článkov","kapital"),"podcast"===t&&(l.show_featured_image=!1,l.show_author=!1),"page"===t&&(l.show_featured_image=!1,l.show_author=!1,l.show_views=!1,l.show_date=!1,l.show_categories=!1,l.show_share_button=!1),"event"===t&&(l.show_ads=!1,l.show_event_location=!0),i="object"!==e(o._kapital_post_render_settings)||Array.isArray(o._kapital_post_render_settings)||null===o._kapital_post_render_settings?l:F(F({},l),i);var c=function(e,t){(i=F({show_featured_image:!0,show_breadcrumbs:!0,show_title:!0,show_author:!0,show_categories:!0,show_views:!0,show_date:!0,show_ads:!0,show_support:!0,show_footer:!0,show_footer_newsletter:!0,show_share_button:!0,show_event_location:!1},i))["".concat(t)]=e,a(F(F({},o),{},{_kapital_post_render_settings:i}))};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z,{meta:o,postType:t,setMeta:a}),(0,k.jsx)(x.PluginDocumentSettingPanel,{name:"kapital-post-render-panel",title:"Nastavenie zobrazovania",icon:"visibility",children:(0,k.jsxs)(f.Flex,{direction:"column",gap:4,children:["page"===t&&(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Zobrazovať filtre","kapital"),checked:i.show_filters,help:(0,p.__)("Pri stránkach sa ako filtre zobrazia dcérske stránky.","kapital"),onChange:function(){return c(!i.show_filters,"show_filters")}}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Zobrazovať ilustračný obrázok","kapital"),checked:i.show_featured_image,help:(0,p.__)("V archívoch článkov je ilustračný obrázok vždy viditeľný.","kapital"),onChange:function(){return c(!i.show_featured_image,"show_featured_image")}}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Zobrazovať breadcrumb navigáciu","kapital"),checked:i.show_breadcrumbs,onChange:function(){return c(!i.show_breadcrumbs,"show_breadcrumbs")}}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Zobrazovať názov","kapital"),checked:i.show_title,help:(0,p.__)("V archívoch článkov je názov vždy viditeľný."),onChange:function(){return c(!i.show_title,"show_title")}}),"page"!==t&&"podcast"!==t&&"event"!==t&&(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Zobrazovať autorstvo","kapital"),checked:i.show_author,onChange:function(){return c(!i.show_author,"show_author")}}),"page"!==t&&"event"!==t&&(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Zobrazovať kategórie článku","kapital"),checked:i.show_categories,onChange:function(){return c(!i.show_categories,"show_categories")},help:(0,p.__)("Zobrazenie čísla, série, rubriky, atď. nad názvom článku","kapital")}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)('Zobraziť tlačidlo "Zdieľať"',"kapital"),checked:i.show_share_button,onChange:function(){return c(!i.show_share_button,"show_share_button")}}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Zobrazovať počet zhliadnutí","kapital"),checked:i.show_views,onChange:function(){return c(!i.show_views,"show_views")}}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:"event"===t?(0,p.__)("Zobrazovať dátum podujatia","kapital"):(0,p.__)("Zobrazovať dátum publikovania","kapital"),checked:i.show_date,onChange:function(){return c(!i.show_date,"show_date")}}),"page"!==t&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Automaticky vložiť podporu","kapital"),checked:i.show_support,onChange:function(){return c(!i.show_support,"show_support")},help:(0,p.__)("Netýka sa manuálne vložených blokov podpory.","kapital")}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Automaticky vložiť inzerciu","kapital"),checked:i.show_ads,help:(0,p.__)("Netýka sa manuálne vložených blokov reklamy.","kapital"),s:!0,onChange:function(){return c(!i.show_ads,"show_ads")}}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:r,checked:i.show_footer,onChange:function(){return c(!i.show_footer,"show_footer")}})]}),(0,k.jsx)(f.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,p.__)("Zobraziť prihlasovanie do newsletteru v päte","kapital"),checked:i.show_footer_newsletter,onChange:function(){return c(!i.show_footer_newsletter,"show_footer_newsletter")}})]})})]})}}}),(0,Q.registerBlockVariation)("core/heading",{name:"bubble-heading",title:(0,p.__)("Bublinkový nadpis","kapital"),attributes:{className:"bubble-heading"}}),K=wp.element.createElement,X=["podcast-seria","redakcia-tag","jazyk","partner","cislo","seria","zaner"],$=["autorstvo"],wp.hooks.addFilter("editor.PostTaxonomyType","kapital/custom-term-selector",(function(e){return function(t){return X.indexOf(t.slug)>=0?K(S,t):$.indexOf(t.slug)>=0?K(D,t):K(e,t)}})),(0,W.addFilter)("blocks.registerBlockType","kapital/block-defaults",(function(e){var t;return["core/paragraph","core/heading","core/list"].includes(e.name)&&(e.supports=ee(ee({},e.supports),{},{align:["wide","full"]})),"core/image"===e.name&&(e.attributes=ee(ee({},e.attributes),{},{className:{type:"string",default:"is-style-rounded"}})),"core/gallery"===e.name&&(e.attributes=ee(ee({},e.attributes),{},{lightBox:{allowEditing:!0,enabled:!0},align:{type:"string",default:"full"},imageCrop:{type:"bool",defualt:!1},style:ee(ee({},e.attributes.style),{},{default:ee(ee({},null===(t=e.attributes.style)||void 0===t?void 0:t.default),{},{spacing:{blockGap:"1rem"}})})}),e.supports=ee(ee({},e.supports),{},{align:["wide","full"]})),e}))}()}();