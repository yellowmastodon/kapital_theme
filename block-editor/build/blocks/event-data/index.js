!function(){"use strict";var e=window.wp.blocks;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n,r){return(n=function(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=window.wp.i18n;var l=window.wp.components,s=window.wp.coreData,c=window.wp.blockEditor,d=window.wp.element,u=window.ReactJSXRuntime;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,p,_){var m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},y=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],b={linkPlaceholder:(0,o.__)("Text linku","kapital"),urlPlaceholder:(0,o.__)("Vložte URL, alebo začnite písať","kapital"),removeLink:(0,o.__)("Odstrániť link","kapital"),addLink:(0,o.__)("Pridať link","kapital")};h=f(f({},b),h);var v,k=(0,c.useBlockProps)(),j=i((0,s.useEntityProp)("postType",e,"meta"),2),g=j[0],x=j[1];v=void 0===g[t]||""==g[t]?p:JSON.parse(g[t]);var w=i((0,d.useState)(v),2),O=w[0],D=w[1],S=function(e,r,a){v[r][a]=e,D(v),x(f(f({},g),{},n({},t,JSON.stringify(v))))};return(0,u.jsx)("div",f(f({},y?k:{}),{},{children:(0,u.jsxs)("table",{children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("th",{style:{fontWeight:"normal",fontSize:"1.2rem"},colSpan:"4",children:_})})}),(0,u.jsxs)("tbody",{children:[""!==m&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{style:{paddingBottom:"8px",paddingTop:"8px"},className:"fs-small",colSpan:"4",children:m})}),O.map((function(e,i){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsx)(l.TextControl,{style:{minWidth:"200px"},__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,placeholder:h.linkPlaceholder,name:"name",value:e.name,onChange:function(e){return S(e,i,"name")}})}),(0,u.jsx)("td",{children:(0,u.jsx)(c.URLInput,{style:{minWidth:"200px"},__next40pxDefaultSize:!0,name:"url",placeholder:h.urlPlaceholder,value:e.url,onChange:function(e){return S(e,i,"url")}})}),O.length>1&&(0,u.jsx)("td",{children:(0,u.jsx)(l.Button,{__next40pxDefaultSize:!0,isDestructive:"true",variant:"secondary",onClick:function(){return function(e){v.splice(e,1),D(v),x(f(f({},g),{},n({},t,JSON.stringify(v))))}(i)},children:h.removeLink})}),O.length-1===i&&(0,u.jsx)("td",{children:(0,u.jsx)(l.Button,{__next40pxDefaultSize:!0,variant:"secondary",onClick:function(){return v=[].concat(function(e){if(Array.isArray(e))return r(e)}(e=v)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{name:"",url:""}]),D(v),void x(f(f({},g),{},n({},t,JSON.stringify(v))));var e},children:h.addLink})})]},i)}))]})]})}))}Math.pow(10,8);const m=36e5,h=Symbol.for("constructDateFrom");function y(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&h in e?e[h](t):e instanceof Date?new e.constructor(t):new Date(t)}function b(e,t){return y(t||e,e)}function v(e){return+b(e)}const k={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},j=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,g=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,x=/^([+-])(\d{2})(?::?(\d{2}))?$/;function w(e){return e?parseInt(e):1}function O(e){return e&&parseFloat(e.replace(",","."))||0}const D=[31,null,31,30,31,30,31,31,30,31,30,31];function S(e){return e%400==0||e%4==0&&e%100!=0}var N=window.React,P=window.wp.date,T=window.wp.primitives,C=(0,u.jsx)(T.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(T.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=JSON.parse('{"UU":"kapital/event-data"}');(0,e.registerBlockType)(M.UU,{edit:function(e){var t=e.context,r=(t.postId,t.postType),a=(0,c.useBlockProps)(),d=i((0,s.useEntityProp)("postType",r,"meta"),2),p=d[0],f=d[1],h=p._event_date_start,T=p._event_date_end,z=p._event_date_string,M=" &ndash; ",I="&nbsp;&zwj;&ndash;&zwj;&nbsp;",L=[(0,o.__)("január","kapital"),(0,o.__)("február","kapital"),(0,o.__)("marec","kapital"),(0,o.__)("apríl","kapital"),(0,o.__)("máj","kapital"),(0,o.__)("jún","kapital"),(0,o.__)("júl","kapital"),(0,o.__)("august","kapital"),(0,o.__)("september","kapital"),(0,o.__)("október","kapital"),(0,o.__)("november","kapital"),(0,o.__)("december","kapital")],E=[{name:(0,o.__)("Dátum + čas (od-do) + rok","kapital"),key:"full"},{name:(0,o.__)("Dátum + čas (od) + rok","kapital"),key:"full-start"},{name:(0,o.__)("Dátum + rok","kapital"),key:"day"},{name:(0,o.__)("Mesiac + rok","kapital"),key:"month"},{name:(0,o.__)("Ročné obdobie + rok","kapital"),key:"season"},{name:(0,o.__)("Rok","kapital"),key:"year"}],A=function(e,t,n){return n*=1e3,(0,u.jsx)(l.Dropdown,{className:"event-date",contentClassName:"event-date-dropdown",popoverProps:{placement:"bottom-start",focusOnMount:!0},renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return(0,u.jsx)(l.Button,{style:{fontSize:".8rem"},size:"default",variant:"tertiary",onClick:r,"aria-expanded":t,children:(0,P.date)("d. m. Y H:i",n)})},renderContent:function(r){r.isOpen;var a=r.onToggle;return(0,u.jsx)("div",{style:{padding:"8px",minWidth:"320px"},children:(0,u.jsxs)(l.__experimentalVStack,{spacing:4,children:[(0,u.jsxs)(l.__experimentalHStack,{alignment:"start",children:[(0,u.jsx)(l.__experimentalHeading,{className:"block-editor-inspector-popover-header__heading",level:2,size:13,children:t}),(0,u.jsx)(l.__experimentalSpacer,{}),(0,u.jsx)(l.Button,{size:"compact",icon:C,tooltipPosition:"middle left",className:"block-editor-inspector-popover-header__action",label:(0,o.__)("Zatvoriť","kapital"),onClick:a})]}),(0,u.jsx)(l.DateTimePicker,{is12Hour:!1,currentDate:(0,P.date)("Y-m-d\\TH:i:s",new Date(n)),onChange:function(t){H(v(function(e,t){const n=()=>y(t?.in,NaN),r=t?.additionalDigits??2,a=function(e){const t={},n=e.split(k.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],k.timeZoneDelimiter.test(t.date)&&(t.date=e.split(k.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const e=k.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let i;if(a.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?a:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(a.date,r);i=function(e,t){if(null===t)return new Date(NaN);const n=e.match(j);if(!n)return new Date(NaN);const r=!!n[4],a=w(n[1]),i=w(n[2])-1,o=w(n[3]),l=w(n[4]),s=w(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,l,s)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}(t,l,s):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(D[t]||(S(e)?29:28))}(t,i,o)&&function(e,t){return t>=1&&t<=(S(e)?366:365)}(t,a)?(e.setUTCFullYear(t,i,Math.max(a,o)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!i||isNaN(+i))return n();const o=+i;let l,s=0;if(a.time&&(s=function(e){const t=e.match(g);if(!t)return NaN;const n=O(t[1]),r=O(t[2]),a=O(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,a)?n*m+6e4*r+1e3*a:NaN}(a.time),isNaN(s)))return n();if(!a.timezone){const e=new Date(o+s),n=b(0,t?.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return l=function(e){if("Z"===e)return 0;const t=e.match(x);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,a)?n*(r*m+6e4*a):NaN}(a.timezone),isNaN(l)?n():b(o+s+l,t?.in)}(t)),e)}})]})})}})},B=function(e,t,n){var r="",a=new Date(1e3*e),i=new Date(1e3*t),l=(0,P.date)("G:i",a),s=(0,P.date)("G:i",i),c=(0,P.date)("j.",a),d=(0,P.date)("j.",i),u=L[Number((0,P.date)("n",a))-1],p=L[Number((0,P.date)("n",i))-1],f=(0,P.date)("Y",a),_=(0,P.date)("Y",i);switch(n){case"full":r=c+u+f===d+p+_?l===s?c+"&nbsp;"+u+" "+f+" "+l:c+"&nbsp;"+u+" "+f+" "+l+I+s:u+f===p+_?c+I+d+" "+u+" "+f+" "+l+I+s:f===_?c+"&nbsp;"+u+M+d+"&nbsp;"+p+" "+f+" "+l+I+s:c+"&nbsp;"+u+" "+f+" "+l+M+d+" "+p+" "+_+" "+s;break;case"full-start":r=c+"&nbsp;"+u+" "+f+" "+l;break;case"day":r=c+u+f===d+p+_?c+"&nbsp;"+u+" "+f:u+f===p+_?c+I+d+" "+u+" "+f:f===_?c+"&nbsp;"+u+M+d+" "+p+" "+_:c+"&nbsp;"+u+" "+f+M+d+" "+p+" "+_;break;case"month":r=u+f===p+_?u+" "+f:f===_?u+M+p+" "+f:u+f+M+p+" "+_;break;case"season":var m=[(0,P.date)("m-d",a),(0,P.date)("m-d",i)];m.forEach((function(e,t){m[t]=e>="12-01"?(0,o.__)("koniec roka","kapital"):e>="09-23"?(0,o.__)("jeseň","kapital"):e>="06-21"?(0,o.__)("leto","kapital"):e>="03-20"?(0,o.__)("jar","kapital"):(0,o.__)("začiatok roka","kapital"),r=m[0]+f===m[1]+_?m[0]+" "+f:f===_?m[0]+M+m[1]+" "+f:m[0]+" "+f+M+m[1]+" "+_}));break;case"year":r=f===_?f:f+M+_}return JSON.stringify({displayDate:r,format:n})},H=function(e,t){e=Math.floor(.001*e),f(U(U({},p),{},"_event_date_start"===t?T<e?n(n(n({},"_event_date_end",e),"_event_date_start",e),"_event_date_string",B(e,e,z.format)):n(n({},"_event_date_start",e),"_event_date_string",B(e,T,z.format)):e<h?n(n({},t,h),"_event_date_string",B(h,T,z.format)):n(n({},t,e),"_event_date_string",B(h,e,z.format))))},J=!1;return void 0!==h&&""!==h&&0!==h||(h=Math.floor(.001*v(new Date)),J=!0),void 0!==T&&""!==T&&0!==T||(T=Math.floor(v(.001*new Date)),J=!0),void 0===z||""===z?(z=JSON.parse(B(h,T,"full-start")),J=!0):(z=JSON.parse(z),J=!0),(0,N.useEffect)((function(){J&&f(U(U({},p),{},n(n(n({},"_event_date_start",h),"_event_date_end",T),"_event_date_string",JSON.stringify(z))))}),[]),(0,u.jsxs)("div",U(U({},a),{},{children:[(0,u.jsxs)("table",{className:"kapital-event-date-table",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("th",{style:{fontWeight:"normal",fontSize:"1.2rem"},colSpan:"2",children:(0,o.__)("Dátum a čas podujatia","kapital")})})}),(0,u.jsxs)("tbody",{style:{verticalAlign:"middle",lineHeight:"1",fontSize:"0.8rem"},children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,o.__)("Od","kapital")}),(0,u.jsx)("td",{children:A("_event_date_start",(0,o.__)("Začiatok podujatia","kapital"),h)})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,o.__)("Do","kapital")}),(0,u.jsx)("td",{children:A("_event_date_end",(0,o.__)("Koniec podujatia","kapital"),T)})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,o.__)("Formát","kapital")}),(0,u.jsx)("td",{className:"kapital-event-date-format",children:(0,u.jsx)("div",{children:(0,u.jsx)(l.CustomSelectControl,{hideLabelFromVision:!0,label:(0,o.__)("Formát","kapital"),multiple:!1,value:E.find((function(e){return e.key===z.format})),id:"kapital-event-select",options:E,onChange:function(e){f(U(U({},p),{},{_event_date_string:B(h,T,e.selectedItem.key)}))},variant:"minimal"})})}),(0,u.jsx)("td",{dangerouslySetInnerHTML:{__html:z.displayDate}})]})]})]}),_(r,"_event_location",[{name:"",url:""}],(0,o.__)("Miesto podujatia","kapital"),"",{linkPlaceholder:(0,o.__)("Miesto","kapital"),urlPlaceholder:(0,o.__)("Url miesta","kapital"),removeLink:(0,o.__)("Odstrániť miesto","kapital"),addLink:(0,o.__)("Pridať miesto","kapital")})]}))}})}();